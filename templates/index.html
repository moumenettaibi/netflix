<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" sizes="32x32" href="static/netflix-logo.png">
    <link rel="icon" type="image/png" sizes="16x16" href="static/netflix-logo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="static/netflix-logo.png">
    <link rel="shortcut icon" href="static/netflix-logo.png">

    <title>Netflix - Watch Tv Shows Online, Watch Movies Online</title>
    <meta name="description"
        content="Watch netflix movies & TV shows or stream right to your smart Tv, game console, PC, Mac, mobile, tablet and more.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.Netflix.com/">
    <meta property="og:title" content="Netflix - Watch Tv Shows Online, Watch Movies Online">
    <meta property="og:description"
        content="Watch netflix movies & TV shows or stream right to your smart Tv, game console, PC, Mac, mobile, tablet and more.">
    <meta property="og:image" content="https://upload.wikimedia.org/wikipedia/commons/0/08/Netflix_2015_logo.svg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.Netflix.com/">
    <meta property="twitter:title" content="Netflix - Watch Tv Shows Online, Watch Movies Online">
    <meta property="twitter:description"
        content="Watch netflix movies & TV shows or stream right to your smart Tv, game console, PC, Mac, mobile, tablet and more.">
    <meta property="twitter:image" content="https://upload.wikimedia.org/wikipedia/commons/0/08/Netflix_2015_logo.svg">
    <style>
        :root {
            --netflix-red: #e50914;
            --background-color: #000000;
            --card-color: #181818;
            --text-color: #fff;
            --text-secondary-color: #b3b3b3;
            --text-muted-color: #777;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        body.modal-open {
            overflow: hidden;
        }

        /* --- HEADER STYLES --- */
        header {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            padding: 20px 50px;
            box-sizing: border-box;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: none;
            transition: background-color 0.3s ease;
        }

        header.scrolled {
            position: fixed;
            background-color: var(--background-color);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 50px;
        }

        .header-right {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 20px;
        }

        .header-logo {
            height: 35px;
            width: auto;
        }

        .main-nav ul {
            display: flex;
            list-style: none;
            padding: 0;
            margin: 0;
            gap: 35px;
        }

        .main-nav li a {
            color: var(--text-secondary-color);
            text-decoration: none;
            font-size: 1rem;
            font-weight: 500;
            transition: color 0.2s ease;
            white-space: nowrap;
        }

        .main-nav li a:hover {
            color: var(--text-color);
        }

        .main-nav li.active a {
            color: var(--text-color);
            font-weight: bold;
        }

        .nav-search-icon {
            height: 24px;
            width: 24px;
            cursor: pointer;
            fill: var(--text-color);
        }

        /* --- MODIFIED IN-HEADER SEARCH (IMPROVED) --- */
        .search-bar-container {
            position: relative;
            display: flex;
            align-items: center;
            background-color: rgba(0, 0, 0, 0.75);
            border: 1px solid rgba(255, 255, 255, 0);
            height: 34px;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.4s ease, visibility 0.4s;
        }

        .search-bar-container .search-icon-input {
            height: 20px;
            width: 20px;
            fill: var(--text-color);
            margin: 0 10px;
        }

        #header-search-input {
            background: transparent;
            border: none;
            outline: none;
            color: var(--text-color);
            font-size: 1rem;
            width: 0;
            padding: 0;
            transition: width 0.4s ease, padding 0.4s ease;
        }

        #close-search-icon {
            display: none;
            cursor: pointer;
            color: var(--text-color);
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.5rem;
            line-height: 1;
        }

        body.search-active .search-bar-container {
            opacity: 1;
            visibility: visible;
            border: 1px solid rgba(255, 255, 255, 0.85);
        }

        body.search-active #header-search-input {
            width: 270px;
            padding-right: 35px;
        }

        body.search-active #search-icon-trigger {
            display: none;
        }

        body.search-active #close-search-icon {
            display: block;
        }

        /* --- HERO SECTION --- */
        .hero-container {
            width: 100%;
            height: 95vh;
            position: relative;
            background-size: cover;
            background-position: center top;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 0 50px;
            box-sizing: border-box;
            transition: background-image 1s ease-in-out;
        }

        .hero-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, rgba(20, 20, 20, 1) 0%, rgba(20, 20, 20, 0) 50%),
                linear-gradient(to top, rgba(20, 20, 20, 1) 0%, rgba(20, 20, 20, 0) 25%);
        }

        .hero-content {
            z-index: 1;
            max-width: 45%;
            position: relative;
        }

        .hero-rank-badge {
            display: flex;
            align-items: center;
            margin: 15px 0;
            font-size: 1.1rem;
            font-weight: 700;
        }

        .hero-rank-square {
            background-color: var(--netflix-red);
            color: white;
            width: 40px;
            height: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: 700;
            text-transform: uppercase;
            border-radius: 3px;
            flex-shrink: 0;
            line-height: 1;
        }

        .hero-rank-square .top-text {
            font-size: 0.5rem;
            letter-spacing: 0.5px;
            margin-bottom: 1px;
        }

        .hero-rank-square .number-text {
            font-size: 0.9rem;
            font-weight: 900;
            letter-spacing: 0;
        }

        .hero-rank-text {
            color: white;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }

        .hero-title {
            font-size: 4.5rem;
            font-weight: 800;
            margin: 0 0 20px;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.7);
        }

        .hero-overview {
            font-size: 1.1rem;
            line-height: 1.5;
            margin-bottom: 25px;
        }

        .hero-buttons {
            display: flex;
            align-items: center;
        }

        .btn {
            border: none;
            padding: 12px 28px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
        }

        .btn-play {
            background-color: white;
            color: black;
        }

        .btn-play:hover {
            background-color: rgba(255, 255, 255, 0.8);
        }

        .btn-play svg {
            width: 24px;
            height: 24px;
            margin-right: 10px;
        }

        .btn-more-info {
            background-color: rgba(109, 109, 110, 0.7);
            color: white;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-more-info:hover {
            background-color: rgba(109, 109, 110, 0.4);
        }

        .btn-more-info svg {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }

        /* --- MAIN CONTENT & ROWS --- */
        main {
            padding-top: 0;
            position: relative;
            z-index: 10;
        }

        .content-row {
            width: 100%;
            margin: 0 auto 50px;
            padding: 0 50px;
            box-sizing: border-box;
        }

        .content-row h2 {
            font-size: 1.8rem;
            margin-bottom: 15px;
        }

        .content-scroll {
            display: flex;
            overflow-x: auto;
            overflow-y: hidden;
            padding: 40px 0 40px 10px;
            scrollbar-width: none;
        }

        .content-scroll::-webkit-scrollbar {
            display: none;
        }

        /* --- CARD STYLES --- */
        .poster-card {
            width: 240px;
            height: 360px;
            border-radius: 4px;
            overflow: visible;
            position: relative;
            flex-shrink: 0;
        }

        .content-scroll>.poster-card {
            margin-right: 10px;
        }

        /* --- CONTAINER FOR RANKED ITEMS --- */
        .ranked-item-container {
            display: flex;
            align-items: center;
            flex-shrink: 0;
            margin-right: 90px;
        }

        /* --- GIANT RANK NUMBER STYLES --- */
        .rank-number {
            font-size: 28rem;
            font-weight: 700;
            color: #181818;
            -webkit-text-stroke: 5px #cbcbcb;
            text-stroke: 1px #aaa;
            line-height: 0.8;
            margin-right: -48px;
        }

        .poster-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 4px;
            display: block;
        }

        .hover-card-details {
            display: flex;
            flex-direction: column;
            position: absolute;
            top: 50%;
            left: 50%;
            width: 140%;
            background-color: var(--card-color);
            border-radius: 6px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.7);
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.9);
            transition: all 0.25s ease-in-out, visibility 0s linear 0.25s;
            pointer-events: none;
            z-index: 99;
            overflow: hidden;
            visibility: hidden;
        }

        .ranked-item-container:hover .poster-card,
        .poster-card:hover {
            z-index: 100;
        }

        .ranked-item-container:hover .hover-card-details,
        .poster-card:hover .hover-card-details {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
            pointer-events: auto;
            visibility: visible;
            transition-delay: 0.5s, 0s;
        }

        .hover-card-media {
            position: relative;
            width: 100%;
            padding-top: 56.25%;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hover-card-body {
            padding: 20px;
        }

        .hover-action-buttons {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            gap: 10px;
        }

        .action-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.7);
            background-color: rgba(42, 42, 42, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
        }

        .action-btn:hover {
            border-color: white;
            background-color: rgba(255, 255, 255, 0.9);
        }

        .action-btn svg {
            width: 20px;
            height: 20px;
            fill: white;
        }

        .action-btn:hover svg {
            fill: black;
        }

        .action-btn.liked,
        .action-btn.added {
            border-color: white;
            background-color: rgba(255, 255, 255, 0.9);
        }

        .action-btn.liked svg,
        .action-btn.added svg {
            fill: black;
        }

        .action-btn.more-info-btn {
            margin-left: auto;
        }

        .hover-card-overview {
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 15px;
            height: 60px;
            overflow: hidden;
        }

        .hover-card-meta {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        .meta-rating {
            border: 1px solid var(--text-secondary-color);
            padding: 2px 5px;
        }

        .hover-card-genres {
            font-size: 0.8rem;
            color: var(--text-secondary-color);
            line-height: 1.4;
        }

        .hover-card-genres span::after {
            content: ' • ';
            margin: 0 5px;
        }

        .hover-card-genres span:last-child::after {
            content: '';
        }

        .loader {
            width: 32px;
            height: 32px;
            border: 4px solid var(--text-color);
            border-bottom-color: var(--netflix-red);
            border-radius: 50%;
            display: inline-block;
            box-sizing: border-box;
            animation: rotation 1s linear infinite;
        }
        .content-scroll .loader {
            margin: 0 auto;
        }

        @keyframes rotation {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* --- SEARCH RESULTS SECTION STYLES --- */
        .search-results-section {
            display: none;
            padding: 120px 50px 50px;
            min-height: 100vh;
            box-sizing: border-box;
        }

        #search-results {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 10px;
            width: 100%;
        }

        #search-feedback {
            color: var(--text-secondary-color);
            font-size: 1.5rem;
            margin-top: 50px;
            text-align: center;
        }

        /* --- INFO MODAL STYLES --- */
        #info-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 3000;
            display: none;
            align-items: center;
            justify-content: center;
        }

        #info-modal.active {
            display: flex;
        }

        .modal-backdrop {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.75);
        }

        .modal-content-wrapper {
            position: relative;
            width: 90%;
            max-width: 850px;
            background-color: var(--card-color);
            border-radius: 8px;
            box-shadow: 0px 3px 15px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            animation: modal-fade-in 0.3s ease-out;
            max-height: 95vh;
            overflow-y: auto;
            scrollbar-width: none;
        }

        .modal-content-wrapper::-webkit-scrollbar {
            display: none;
        }

        @keyframes modal-fade-in {
            from {
                opacity: 0;
                transform: scale(0.95);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .modal-media-container {
            position: relative;
            padding-top: 56.25%;
            background-size: cover;
            background-position: center;
        }

        .modal-media-container::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 50%;
            background: linear-gradient(to top, var(--background-color), transparent);
        }

        .modal-media-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        .modal-close-btn {
            position: absolute;
            top: 16px;
            right: 16px;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: #181818;
            color: white;
            border: none;
            font-size: 1.5rem;
            line-height: 36px;
            text-align: center;
            cursor: pointer;
            z-index: 10;
        }

        .modal-content-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            padding: 0 48px 48px 48px;
            width: 100%;
            box-sizing: border-box;
            z-index: 5;
        }

        .modal-title {
            font-size: 48px;
            font-weight: bold;
            color: #fff;
            margin: 0 0 20px 0;
        }

        .modal-action-buttons {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .modal-play-btn {
            background-color: #fff;
            color: #000;
            padding: 8px 24px;
            border-radius: 4px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            text-decoration: none;
        }

        .modal-play-btn svg {
            width: 24px;
            height: 24px;
        }

        .modal-icon-btn {
            border: 2px solid rgba(255, 255, 255, 0.7);
            background-color: rgba(42, 42, 42, 0.6);
            border-radius: 50%;
            width: 42px;
            height: 42px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            padding: 0;
        }

        .modal-icon-btn:hover {
            border-color: #fff;
        }

        .modal-icon-btn.liked, .modal-icon-btn.added {
            border-color: #fff;
            background-color: rgba(255, 255, 255, 0.9);
        }

        .modal-icon-btn.liked svg, .modal-icon-btn.added svg {
            fill: black;
        }

        .modal-icon-btn svg {
            width: 22px;
            height: 22px;
            fill: #fff;
        }

        .modal-body {
            padding: 16px 48px 32px 48px;
        }

        .modal-metadata-row {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
            font-size: 16px;
            color: #fff;
            margin-bottom: 24px;
        }

        .metadata-badge {
            border: 1px solid rgba(255, 255, 255, 0.4);
            padding: 1px 8px;
            font-size: 14px;
            border-radius: 3px;
        }

        .modal-main-content-grid {
            display: grid;
            grid-template-columns: 3fr 2fr;
            gap: 32px;
            font-size: 16px;
            line-height: 1.6;
        }

        .modal-meta-data p {
            margin: 0 0 16px;
        }

        .modal-meta-data .label {
            color: var(--text-muted-color);
        }

        .modal-meta-data .value {
            color: var(--text-color);
        }

        /* --- PLAYER MODAL STYLES --- */
        .player-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            z-index: 9999;
            display: none;
            justify-content: center;
            align-items: center;
        }

        .player-modal.active {
            display: flex;
        }

        #player-container {
            width: 100%;
            height: 100%;
        }

        #player-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .close-player-btn {
            position: absolute;
            top: 30px;
            left: 40px;
            background: none;
            border: none;
            padding: 0;
            cursor: pointer;
            z-index: 10000;
        }

        .close-player-btn svg {
            width: 36px;
            height: 36px;
            fill: #fff;
            transition: transform 0.2s ease;
        }

        .close-player-btn:hover svg {
            transform: scale(1.1);
        }

        /* --- TOAST NOTIFICATION STYLES --- */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--card-color);
            color: var(--text-color);
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            z-index: 10000;
            opacity: 0;
            transition: opacity 0.3s ease;
            font-size: 1rem;
            border-left: 4px solid var(--netflix-red);
        }

        .toast.show {
            opacity: 1;
        }


        /* --- MOBILE-SPECIFIC ELEMENTS (Hidden by default) --- */
        .mobile-logo,
        .mobile-page-title,
        .mobile-filters {
            display: none;
        }

        /* --- RESPONSIVE STYLES --- */

        /* Tablets (and large phones in landscape) */
        @media (max-width: 1024px) {
            header {
                padding: 20px 30px;
            }

            .header-left {
                gap: 25px;
            }

            .main-nav ul {
                gap: 20px;
            }

            .hero-container {
                padding: 0 30px;
            }

            .hero-content {
                max-width: 60%;
            }

            .hero-title {
                font-size: 3.5rem;
            }

            .content-row {
                padding: 0 30px;
            }

            .rank-number {
                font-size: 22rem;
                margin-right: -40px;
            }

            .search-results-section {
                padding: 120px 30px 30px;
            }
        }

        /* Small Tablets & Landscape Phones */
        @media (max-width: 768px) {
            .header-logo {
                height: 30px;
            }

            .main-nav li a {
                font-size: 0.9rem;
            }

            body.search-active #header-search-input {
                width: 200px;
            }

            .hero-content {
                max-width: 75%;
            }

            .hero-title {
                font-size: 3rem;
            }

            .hero-overview {
                font-size: 1rem;
                display: -webkit-box;
                -webkit-line-clamp: 3;
                -webkit-box-orient: vertical;
                overflow: hidden;
            }

            .btn {
                padding: 10px 20px;
                font-size: 1rem;
            }

            .content-row h2 {
                font-size: 1.5rem;
            }

            .poster-card {
                width: 200px;
                height: 300px;
            }

            .rank-number {
                font-size: 18rem;
                -webkit-text-stroke-width: 4px;
                margin-right: -30px;
            }

            .ranked-item-container {
                margin-right: 50px;
            }

            #search-results {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }

            .modal-content-wrapper {
                width: 95%;
                max-height: 90vh;
            }

            .modal-main-content-grid {
                grid-template-columns: 1fr;
                gap: 24px;
            }

            .modal-title {
                font-size: 32px;
            }

            .modal-body,
            .modal-content-overlay {
                padding: 24px;
            }

            .modal-content-overlay {
                padding-bottom: 24px;
            }
        }


        /* Portrait Phones */
        @media (max-width: 480px) {
            body {
                background-color: var(--background-color);
            }

            .poster-card {
                cursor: pointer;
            }

            .poster-card .hover-card-details {
                display: none !important;
            }

            .modal-content-wrapper {
                width: 100% !important;
                max-width: 100% !important;
                height: 100vh !important;
                max-height: 100vh !important;
                border-radius: 0 !important;
                margin: 0 !important;
            }

            .modal-content-overlay {
                padding: 20px !important;
            }

            .modal-body {
                padding: 20px !important;
            }

            .modal-title {
                font-size: 24px !important;
            }

            .modal-content-overlay {
                position: relative !important;
                padding: 20px !important;
                margin-top: 20px !important;
                background-color: var(--background-color) !important;
            }

            .modal-media-container {
                padding-top: 80% !important;
                margin-top: -130px !important;
            }

            .modal-media-container::after {
                display: none !important;
            }

            .modal-content-wrapper {
                background-color: var(--background-color) !important;
            }

            .close-player-btn {
                left: 20px !important;
            }

            /* --- Mobile Search Popup Styles (IMPROVED) --- */
            .mobile-search-popup {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: #121212;
                z-index: 10000;
                display: none;
                flex-direction: column;
                box-sizing: border-box;
            }

            .mobile-search-popup.active {
                display: flex;
            }

            .mobile-search-header {
                display: flex;
                align-items: center;
                padding: 16px;
                gap: 10px;
            }

            .mobile-search-back-btn {
                background: none;
                border: none;
                color: #FFFFFF;
                cursor: pointer;
                padding: 0;
            }
            .mobile-search-back-btn svg {
                width: 24px;
                height: 24px;
                fill: #FFFFFF;
            }

            .mobile-search-input-container {
                display: flex;
                align-items: center;
                flex-grow: 1;
                background-color: #2C2C2C;
                border: none;
                border-radius: 8px;
                padding: 10px 15px;
                gap: 10px;
            }

            .mobile-search-input {
                flex-grow: 1;
                background-color: transparent;
                border: none;
                color: #FFFFFF;
                font-size: 1rem;
                outline: none;
                padding: 0;
            }

            .mobile-search-input::placeholder {
                color: #9E9E9E;
                font-size: 1rem;
            }

            .mobile-search-icon {
                width: 20px;
                height: 20px;
                fill: #9E9E9E;
            }

            .mobile-mic-icon {
                width: 20px;
                height: 20px;
                fill: #FFFFFF;
                cursor: pointer;
            }

            .mobile-search-results {
                flex: 1;
                overflow-y: auto;
                display: flex;
                flex-direction: column;
                /* The 'gap' property was removed from here to be placed on the list itself */
            }

            /* This is the new rule that adds the spacing */
            #mobile-search-results-list {
                display: flex;
                flex-direction: column;
                gap: 16px; /* <--- Adjust this value for more or less space */
                padding-bottom: 16px;
            }

            .mobile-result-item {
                display: flex;
                align-items: center;
                justify-content: space-between;
                cursor: pointer;
                padding: 0 16px;
                gap: 16px;
            }

            .mobile-search-title {
                font-size: 1.25rem;
                font-weight: 700;
                color: #FFFFFF;
                margin: 24px 16px;
            }

            .mobile-result-item {
                display: flex;
                align-items: center;
                justify-content: space-between;
                cursor: pointer;
                padding: 0 16px;
                gap: 16px;
            }

            .mobile-result-thumbnail {
                width: 120px;
                aspect-ratio: 16 / 9;
                border-radius: 4px;
                object-fit: cover;
                flex-shrink: 0;
            }

            .mobile-result-info {
                flex-grow: 1;
            }

            .mobile-result-title {
                font-size: 1rem;
                font-weight: normal;
                color: #EAEAEA;
                margin-bottom: 5px;
            }

            .mobile-result-meta {
                font-size: 0.9rem;
                color: var(--text-secondary-color);
            }

            .mobile-play-btn {
                background-color: transparent;
                border: 2px solid rgba(255, 255, 255, 0.7);
                border-radius: 50%;
                width: 44px;
                height: 44px;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 0;
                transition: all 0.2s ease;
            }

            .mobile-play-btn:hover {
                background-color: rgba(255, 255, 255, 0.2);
                border-color: white;
            }

            .mobile-play-btn svg {
                width: 24px;
                height: 24px;
                fill: #FFFFFF;
                margin-left: 3px;
            }

            header {
                padding: 5px 15px 5px 0px;
                background-color: var(--background-color) !important;
                position: relative;
            }

            .header-left {
                gap: 8px;
                margin-left: 4px;
            }

            .header-logo {
                display: none;
            }

            .mobile-logo {
                display: block;
                width: 40px;
                height: 40px;
            }

            .mobile-page-title {
                display: block;
                font-size: 1.75rem;
                font-weight: bold;
                color: var(--text-color);
            }

            .main-nav {
                display: none;
            }
            
            .nav-search-icon {
                width: 28px;
                height: 28px;
            }

            .mobile-filters {
                display: flex;
                gap: 8px;
                padding: 0 15px 15px 15px;
            }

            .mobile-filters button {
                flex-grow: 1;
                padding: 8px 12px;
                background-color: transparent;
                border: 1px solid #777;
                color: var(--text-color);
                border-radius: 20px;
                font-size: 0.9rem;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 5px;
                transition: all 0.2s ease;
            }

            .mobile-filters button.active {
                background-color: #777;
                border-color: #777;
                color: white;
            }

            .mobile-filters button svg {
                width: 16px;
                height: 16px;
                fill: white;
            }

            .hero-content {
                display: none;
            }

            .hero-container {
                padding: 0 15px;
                height: auto;
                background-image: none !important;
                margin-bottom: 25px; /* Spacing */
            }

            .hero-container::before {
                display: none;
            }

            .hero-frame-mobile {
                width: 100%;
                aspect-ratio: 2 / 3;
                max-height: 500px;
                border-radius: 12px;
                overflow: hidden;
                position: relative;
                display: flex;
                flex-direction: column;
                justify-content: flex-end;
                box-shadow: 0 8px 25px rgba(0,0,0,0.5);
                cursor: pointer;
            }
            
            .hero-frame-mobile .hero-image{
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-size: cover;
                background-position: center;
                z-index: 1;
            }

            .hero-frame-mobile .hero-gradient {
                position: absolute;
                bottom: 0;
                left: 0;
                width: 100%;
                height: 70%;
                background: linear-gradient(to top, rgba(0,0,0,0.9) 10%, transparent);
                z-index: 2;
            }

            .hero-frame-mobile .hero-info {
                position: relative;
                z-index: 3;
                padding: 20px;
                text-align: center;
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 12px;
            }

            .hero-frame-mobile .hero-title-mobile {
                font-size: 1.8rem;
                font-weight: bold;
                color: white;
                text-shadow: none;
            }

            .hero-frame-mobile .hero-tags-mobile {
                font-size: 0.9rem;
                color: #ddd;
            }
             .hero-tags-mobile span::after {
                content: ' • ';
                margin: 0 4px;
            }
            .hero-tags-mobile span:last-child::after {
                content: '';
            }

            .hero-frame-mobile .hero-buttons-mobile {
                display: flex;
                width: 100%;
                gap: 10px;
                margin-top: 10px;
            }

            .btn-play-mobile, .btn-mylist-mobile {
                flex: 1;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
                padding: 12px;
                border-radius: 8px;
                font-size: 1rem;
                font-weight: bold;
                border: none;
                cursor: pointer;
            }

            .btn-play-mobile {
                background-color: white;
                color: black;
                text-decoration: none;
            }
            .btn-play-mobile svg {
                width: 20px;
                height: 20px;
                fill: black;
            }

            .btn-mylist-mobile {
                background-color: rgba(74, 74, 74, 0.8);
                color: white;
                border: 1px solid rgba(150,150,150,0.5);
            }
            .btn-mylist-mobile svg {
                width: 20px;
                height: 20px;
                fill: white;
            }

            #main-content {
                display: block;
                margin-top: 0; /* Let it flow naturally */
            }
            
            .content-row {
                padding: 0 15px;
                margin-bottom: 40px; /* More space between rows */
            }
            .content-row h2 {
                font-size: 1.25rem;
                font-weight: bold;
                margin-bottom: 5px; /* Less space between title and scroll area */
            }

            .content-scroll {
                padding-top: 10px;
                padding-bottom: 10px;
            }
            
            .poster-card {
                width: 120px; /* Smaller cards for mobile */
                height: 180px;
            }

            /* FIX: Make ranking numbers smaller and position them */
            .rank-number {
                font-size: 9rem;
                -webkit-text-stroke-width: 3px;
                -webkit-text-stroke-color: #bbb;
                text-stroke-width: 3px;
                text-stroke-color: #bbb;
                margin-right: -25px;
                align-self: flex-end; /* Align to bottom of container */
                line-height: 0.7;
            }

            .ranked-item-container {
                margin-right: 25px; /* Adjust spacing between ranked items */
                align-items: flex-end; /* Align number and poster to the bottom */
            }
        }

        @media (min-width: 481px) {
            .mobile-search-popup {
                display: none !important;
            }
        }
    </style>
</head>

<body>

    <header>
        <div class="header-left">
            <a href="/browse"><img src="https://upload.wikimedia.org/wikipedia/commons/0/08/Netflix_2015_logo.svg"
                    alt="Netflix Logo" class="header-logo"></a>
            
            <img src="static/netflix-logo.png" alt="N" class="mobile-logo">
            <h1 class="mobile-page-title">Home</h1>

            <nav class="main-nav">
                <ul>
                    <li class="active" id="nav-home"><a href="#">Home</a></li>
                    <li id="nav-shows"><a href="#">Shows</a></li>
                    <li id="nav-movies"><a href="#">Movies</a></li>
                    <li><a href="/my-netflix">My Netflix</a></li>
                </ul>
            </nav>
        </div>
        <div class="header-right">
            <div id="search-bar-container" class="search-bar-container">
                <svg class="search-icon-input" viewBox="0 0 24 24">
                    <path
                        d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z">
                    </path>
                </svg>
                <input type="text" id="header-search-input" placeholder="Titles, people, genres" autocomplete="off">
                <span id="close-search-icon">&times;</span>
            </div>
            <svg id="search-icon-trigger" class="nav-search-icon" viewBox="0 0 24 24">
                <path
                    d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z">
                </path>
            </svg>
        </div>
    </header>

    <nav class="mobile-filters">
        <button>TV Shows</button>
        <button>Movies</button>
        <button>Categories <svg viewBox="0 0 24 24"><path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"></path></svg></button>
    </nav>

    <section id="search-results-section" class="search-results-section">
        <div id="search-results"></div>
        <div id="search-feedback"></div>
    </section>

    <section id="hero-container" class="hero-container"></section>

    <main id="main-content">
        <div class="content-row" data-content-type="movie">
            <h2 id="movies-heading">Top 10 Movies Today</h2>
            <div class="content-scroll" id="trending-movies">
                <div class="loader"></div>
            </div>
        </div>
        <div class="content-row" data-content-type="tv">
            <h2 id="tv-heading">Top 10 TV Shows Today</h2>
            <div class="content-scroll" id="trending-shows">
                <div class="loader"></div>
            </div>
        </div>
        <div id="genre-rows" data-content-type="movie"></div>
        <div id="tv-genre-rows" data-content-type="tv"></div>
    </main>

    <div id="info-modal"></div>

    <div id="player-modal" class="player-modal">
        <button id="close-player-btn" class="close-player-btn" title="Back to Browse">
            <svg viewBox="0 0 24 24">
                <path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"></path>
            </svg>
        </button>
        <div id="player-container"></div>
    </div>

    <div id="toast" class="toast"></div>

    <!-- Mobile Search Popup -->
    <div id="mobile-search-popup" class="mobile-search-popup">
        <div class="mobile-search-header">
            <button class="mobile-search-back-btn" id="mobile-search-back-btn">
                <svg viewBox="0 0 24 24">
                    <path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"></path>
                </svg>
            </button>
            <div class="mobile-search-input-container">
                <svg class="mobile-search-icon" viewBox="0 0 24 24">
                    <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
                </svg>
                <input type="text" id="mobile-search-input" class="mobile-search-input" placeholder="Search games, shows, movies..." autocomplete="off">
                <svg class="mobile-mic-icon" viewBox="0 0 24 24">
                    <path d="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z"></path>
                </svg>
            </div>
        </div>
        <div class="mobile-search-results">
            <div class="mobile-search-title">Recommended TV Shows & Movies</div>
            <div id="mobile-search-results-list"></div>
        </div>
    </div>

    <footer></footer>

    <script>
        const apiKey = 'f2d7ae9dee829174c475e32fe8f993dc';
        const posterBaseUrl = 'https://image.tmdb.org/t/p/w500';
        const backdropBaseUrl = 'https://image.tmdb.org/t/p/original';
        const playerBaseUrl = 'https://player.videasy.net'; 

        function createPosterCard(item, mediaType) {
            if (!item.poster_path) return null;
            const posterElement = document.createElement('div');
            posterElement.classList.add('poster-card');
            posterElement.dataset.id = item.id;
            posterElement.dataset.type = mediaType || item.media_type;
            posterElement.innerHTML = `
                <img src="${posterBaseUrl}${item.poster_path}" alt="${item.title || item.name}">
                <div class="hover-card-details">
                    <div class="hover-card-media"><div class="loader"></div></div>
                </div>`;
            return posterElement;
        }

        function displayContentRow(items, container, mediaType, isRankedList = false) {
            container.innerHTML = '';
            items.forEach((item, index) => {
                const card = createPosterCard(item, mediaType);
                if (!card) return;
                if (isRankedList) {
                    const rankedContainer = document.createElement('div');
                    rankedContainer.classList.add('ranked-item-container');
                    const rankNumber = document.createElement('div');
                    rankNumber.classList.add('rank-number');
                    rankNumber.textContent = index + 1;
                    rankedContainer.appendChild(rankNumber);
                    rankedContainer.appendChild(card);
                    container.appendChild(rankedContainer);
                } else {
                    container.appendChild(card);
                }
            });
        }

        async function fetchAndPopulateHoverCard(card) {
            if (card.dataset.detailsLoaded === 'true') return;
            card.dataset.detailsLoaded = 'true';

            const mediaType = card.dataset.type;
            const itemId = card.dataset.id;
            const playerUrl = `${playerBaseUrl}/${mediaType}/${itemId}`;
            const url = `https://api.themoviedb.org/3/${mediaType}/${itemId}?api_key=${apiKey}&append_to_response=content_ratings`;

            const data = await fetchData(url);
            if (!data) return;

            const hoverDetailsContainer = card.querySelector('.hover-card-details');
            const releaseYear = (data.release_date || data.first_air_date || '').substring(0, 4);
            const runtime = data.runtime || (data.episode_run_time ? data.episode_run_time[0] : null);
            const formattedRuntime = runtime ? `${Math.floor(runtime / 60)}h ${runtime % 60}m` : '';
            const overview = data.overview.length > 150 ? data.overview.substring(0, 150) + '...' : data.overview;
            let rating = 'NR';
            if (data.content_ratings?.results) {
                const usRating = data.content_ratings.results.find(r => r.iso_3166_1 === 'US');
                if (usRating) rating = usRating.rating;
            }
            const genreTags = data.genres.slice(0, 3).map(g => `<span>${g.name}</span>`).join('');
            const likedList = getStorageData(STORAGE_KEYS.LIKED_LIST);
            const isLiked = likedList.some(item => item.id == itemId && (item.media_type || (item.title ? 'movie' : 'tv')) === mediaType);
            const likedClass = isLiked ? 'liked' : '';
            const myList = getStorageData(STORAGE_KEYS.MY_LIST);
            const isInMyList = myList.some(item => item.id == itemId && (item.media_type || (item.title ? 'movie' : 'tv')) === mediaType);
            const addedClass = isInMyList ? 'added' : '';
            const addListIcon = isInMyList ? '<svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></svg>' : '<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>';

            hoverDetailsContainer.innerHTML = `
                <div class="hover-card-media" style="background-image: url('${backdropBaseUrl}${data.backdrop_path}')"></div>
                <div class="hover-card-body">
                    <div class="hover-action-buttons">
                        <a href="${playerUrl}" class="action-btn play-btn js-play-trigger" title="Play"><svg viewBox="0 0 24 24"><path d="M6 4l15 8-15 8z"></path></svg></a>
                        <button class="action-btn add-list-btn ${addedClass}" title="Add to My List" data-id="${itemId}" data-type="${mediaType}" onclick="addToMyList('${itemId}', '${mediaType}', this)"><svg viewBox="0 0 24 24">${addListIcon}</svg></button>
                        <button class="action-btn like-btn ${likedClass}" title="Like" data-id="${itemId}" data-type="${mediaType}" onclick="addToLikedList('${itemId}', '${mediaType}', this)"><svg viewBox="0 0 24 24"><path d="M23,10C23,8.89,22.1,8,21,8H14.68L15.64,3.43C15.66,3.33,15.67,3.22,15.67,3.11C15.67,2.7,15.5,2.32,15.23,2.05L14.17,1L7.59,7.59C7.22,7.95,7,8.45,7,9V19A2,2 0 0,0 9,21H18C18.83,21,19.54,20.5,19.84,19.78L22.86,12.73C22.95,12.5,23,12.26,23,12V10M1,21H5V9H1V21Z"></path></svg></button>
                        <button class="action-btn more-info-btn" title="More Info" data-id="${itemId}" data-type="${mediaType}"><svg viewBox="0 0 24 24"><path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"></path></svg></button>
                    </div>
                    <p class="hover-card-overview">${overview}</p>
                    <div class="hover-card-meta">
                        <span class="meta-rating">${rating}</span><span class="meta-year">${releaseYear}</span><span class="meta-runtime">${formattedRuntime}</span>
                    </div>
                    <div class="hover-card-genres">${genreTags}</div>
                </div>`;
        }

        const initializePage = async () => {
            setupHeroSection();
            let countryDetails = { region: 'US', countryName: 'the U.S.' };
            try {
                const geoResponse = await fetch('https://ipapi.co/json/');
                const geoData = await geoResponse.json();
                if (geoData && geoData.country_code) {
                    countryDetails = { region: geoData.country_code, countryName: geoData.country_name };
                }
            } catch (error) { console.warn('Could not fetch user location, defaulting to US.', error); }
            getTrendingContent('movie', 'trending-movies', 'movies-heading', countryDetails);
            getTrendingContent('tv', 'trending-shows', 'tv-heading', countryDetails);
            createGenreRows();
            createTvGenreRows();
        };

        async function fetchData(url) {
            try {
                const response = await fetch(url);
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                return await response.json();
            } catch (error) { console.error('Error fetching data:', error); return null; }
        }

        async function getTrendingContent(mediaType, containerId, headingId, countryDetails) {
            const container = document.getElementById(containerId);
            const heading = document.getElementById(headingId);
            heading.textContent = `Top 10 ${mediaType === 'movie' ? 'Movies' : 'TV Shows'} in ${countryDetails.countryName} Today`;
            const url = `https://api.themoviedb.org/3/trending/${mediaType}/day?api_key=${apiKey}&region=${countryDetails.region}`;
            const data = await fetchData(url);
            if (data?.results) displayContentRow(data.results.slice(0, 10), container, mediaType, true);
        }

        async function createGenreRows() {
            const genreRowsContainer = document.getElementById('genre-rows');
            genreRowsContainer.innerHTML = '';
            const genres = [{ id: 28, name: "Action" }, { id: 35, name: "Comedy" }, { id: 27, name: "Horror" }, { id: 878, name: "Science Fiction" }];
            for (const genre of genres) {
                const url = `https://api.themoviedb.org/3/discover/movie?api_key=${apiKey}&with_genres=${genre.id}&sort_by=popularity.desc`;
                const data = await fetchData(url);
                if (data?.results) {
                    const row = document.createElement('div');
                    row.classList.add('content-row');
                    row.innerHTML = `<h2>${genre.name} Movies</h2><div class="content-scroll"></div>`;
                    genreRowsContainer.appendChild(row);
                    displayContentRow(data.results, row.querySelector('.content-scroll'), 'movie');
                }
            }
        }

        async function createTvGenreRows() {
            const genreRowsContainer = document.getElementById('tv-genre-rows');
            genreRowsContainer.innerHTML = '';
            const genres = [{ id: 10759, name: "Action & Adventure" }, { id: 35, name: "Comedy" }, { id: 18, name: "Drama" }, { id: 10765, name: "Sci-Fi & Fantasy" }];
            for (const genre of genres) {
                const url = `https://api.themoviedb.org/3/discover/tv?api_key=${apiKey}&with_genres=${genre.id}&sort_by=popularity.desc`;
                const data = await fetchData(url);
                if (data?.results) {
                    const row = document.createElement('div');
                    row.classList.add('content-row');
                    row.innerHTML = `<h2>${genre.name} TV Shows</h2><div class="content-scroll"></div>`;
                    genreRowsContainer.appendChild(row);
                    displayContentRow(data.results, row.querySelector('.content-scroll'), 'tv');
                }
            }
        }

        async function setupHeroSection(mediaType = 'all') {
            const heroContainer = document.getElementById('hero-container');
            heroContainer.innerHTML = '<div class="loader"></div>';

            try {
                const isMobile = window.innerWidth <= 480;
                let trendingUrl;
                if (mediaType === 'all') {
                    trendingUrl = `https://api.themoviedb.org/3/trending/all/day?api_key=${apiKey}&language=en-US`;
                } else {
                    trendingUrl = `https://api.themoviedb.org/3/trending/${mediaType}/day?api_key=${apiKey}&language=en-US`;
                }

                const trendingData = await fetchData(trendingUrl);
                const allTrending = (trendingData?.results || []).filter(item => item.backdrop_path && item.poster_path);

                if (allTrending.length > 0) {
                    const top10Trending = allTrending.slice(0, 10);
                    const featured = top10Trending[Math.floor(Math.random() * top10Trending.length)];
                    const featuredMediaType = mediaType === 'all' ? (featured.media_type || (featured.title ? 'movie' : 'tv')) : mediaType;
                    const playerUrl = `${playerBaseUrl}/${featuredMediaType}/${featured.id}`;

                    if (isMobile) {
                        const detailsUrl = `https://api.themoviedb.org/3/${featuredMediaType}/${featured.id}?api_key=${apiKey}`;
                        const details = await fetchData(detailsUrl);
                        const genreTags = details.genres.slice(0, 5).map(g => `<span>${g.name}</span>`).join('');
                        const myList = getStorageData(STORAGE_KEYS.MY_LIST);
                        const isInMyList = myList.some(item => item.id == featured.id && (item.media_type || (item.title ? 'movie' : 'tv')) === featuredMediaType);
                        const myListButtonIcon = isInMyList ? `<svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></svg>` : `<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>`;
                        
                        heroContainer.innerHTML = `
                        <div class="hero-frame-mobile" data-id="${featured.id}" data-type="${featuredMediaType}">
                            <div class="hero-image" style="background-image: url('${posterBaseUrl}${featured.poster_path}')"></div>
                            <div class="hero-gradient"></div>
                            <div class="hero-info">
                                <h1 class="hero-title-mobile">${featured.name || featured.title}</h1>
                                <div class="hero-tags-mobile">${genreTags}</div>
                                <div class="hero-buttons-mobile">
                                    <a href="${playerUrl}" class="btn-play-mobile js-play-trigger">
                                        <svg viewBox="0 0 24 24"><path d="M6 4l15 8-15 8z"></path></svg>Play
                                    </a>
                                    <button class="btn-mylist-mobile" onclick="event.stopPropagation(); addToMyList('${featured.id}', '${featuredMediaType}', this)">
                                        ${myListButtonIcon} My List
                                    </button>
                                </div>
                            </div>
                        </div>`;
                    } else {
                         const rankInType = (trendingData?.results.findIndex(item => item.id === featured.id) || 0) + 1;
                         const mediaTypeDisplay = featuredMediaType === 'movie' ? 'Movies' : 'TV Shows';
                         heroContainer.style.backgroundImage = `url(${backdropBaseUrl}${featured.backdrop_path})`;
                         heroContainer.innerHTML = `
                            <div class="hero-content">
                                <h1 class="hero-title">${featured.name || featured.title}</h1>
                                <div class="hero-rank-badge">
                                    <div class="hero-rank-square"><div class="top-text">TOP</div><div class="number-text">10</div></div>
                                    <div class="hero-rank-text">#${rankInType} in ${mediaTypeDisplay} Today</div>
                                </div>
                                <p class="hero-overview">${featured.overview}</p>
                                <div class="hero-buttons">
                                    <a href="${playerUrl}" class="btn btn-play js-play-trigger"><svg viewBox="0 0 24 24"><path d="M6 4l15 8-15 8z" fill="currentColor"></path></svg>Play</a>
                                    <a href="#" class="btn btn-more-info" data-id="${featured.id}" data-type="${featuredMediaType}">
                                        <svg viewBox="0 0 24 24"><path d="M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z"/></svg>
                                        More info
                                    </a>
                                </div>
                            </div>`;
                    }
                } else {
                    heroContainer.innerHTML = "<p>Could not load featured content.</p>";
                }
            } catch (error) {
                heroContainer.innerHTML = "<p>Could not load featured content.</p>";
                console.error("Error setting up hero section:", error);
            }
        }

        function openPlayerModal(url) {
            const playerModal = document.getElementById('player-modal');
            const playerContainer = document.getElementById('player-container');
            if (playerContainer && playerModal) {
                playerContainer.innerHTML = `<iframe src="${url}" allow="autoplay; fullscreen" allowfullscreen></iframe>`;
                playerModal.classList.add('active');
                document.body.classList.add('modal-open');
            }
        }

        function closePlayerModal() {
            const playerModal = document.getElementById('player-modal');
            const playerContainer = document.getElementById('player-container');
            if (playerContainer && playerModal) {
                playerModal.classList.remove('active');
                playerContainer.innerHTML = '';
                document.body.classList.remove('modal-open');
            }
        }

        async function openInfoModal(mediaType, itemId) {
            document.body.classList.add('modal-open');
            const infoModal = document.getElementById('info-modal');
            infoModal.classList.add('active');
            infoModal.innerHTML = `<div class="modal-backdrop"></div><div style="position:relative; z-index:1;"><div class="loader"></div></div>`;
            const url = `https://api.themoviedb.org/3/${mediaType}/${itemId}?api_key=${apiKey}&append_to_response=videos,content_ratings,credits`;
            const data = await fetchData(url);
            if (!data) {
                infoModal.innerHTML = '<p>Could not load details.</p>';
                return;
            }

            const title = data.name || data.title;
            const releaseYear = (data.first_air_date || data.release_date || '').substring(0, 4);
            const seasons = data.number_of_seasons ? `${data.number_of_seasons} Seasons` : '';
            const overview = data.overview;
            const cast = data.credits?.cast.slice(0, 3).map(c => c.name).join(', ') + ', more';
            const genres = data.genres.map(g => g.name).join(', ');
            const playerUrl = `${playerBaseUrl}/${mediaType}/${itemId}`;
            let rating = '';
            if (data.content_ratings?.results) {
                const usRating = data.content_ratings.results.find(r => r.iso_3166_1 === 'US');
                if (usRating?.rating) rating = `<span class="metadata-badge">${usRating.rating}</span>`;
            }
            const officialTrailer = data.videos?.results.find(v => v.site === 'YouTube' && v.type === 'Trailer');
            const mediaContent = officialTrailer ? `<iframe src="https://www.youtube.com/embed/${officialTrailer.key}?autoplay=1&mute=0&controls=0&loop=1&playlist=${officialTrailer.key}" allow="autoplay; encrypted-media" allowfullscreen></iframe>` : '';
            const backgroundStyle = !officialTrailer ? `style="background-image: url('${backdropBaseUrl}${data.backdrop_path}')"` : '';
            const playIcon = `<svg viewBox="0 0 24 24"><path d="M6 4l15 8-15 8z" fill="currentColor"></path></svg>`;
            const likeIcon = `<svg viewBox="0 0 24 24"><path d="M23,10C23,8.89,22.1,8,21,8H14.68L15.64,3.43C15.66,3.33,15.67,3.22,15.67,3.11C15.67,2.7,15.5,2.32,15.23,2.05L14.17,1L7.59,7.59C7.22,7.95,7,8.45,7,9V19A2,2 0 0,0 9,21H18C18.83,21,19.54,20.5,19.84,19.78L22.86,12.73C22.95,12.5,23,12.26,23,12V10M1,21H5V9H1V21Z"></path></svg>`;
            const likedList = getStorageData(STORAGE_KEYS.LIKED_LIST);
            const isLiked = likedList.some(item => item.id == itemId && (item.media_type || (item.title ? 'movie' : 'tv')) === mediaType);
            const likedClass = isLiked ? 'liked' : '';
            const myList = getStorageData(STORAGE_KEYS.MY_LIST);
            const isInMyList = myList.some(item => item.id == itemId && (item.media_type || (item.title ? 'movie' : 'tv')) === mediaType);
            const addedClass = isInMyList ? 'added' : '';
            const addListIcon = isInMyList ? '<svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></svg>' : '<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>';

            infoModal.innerHTML = `
                <div class="modal-backdrop"></div>
                <div class="modal-content-wrapper">
                    <button class="modal-close-btn">&times;</button>
                    <div class="modal-media-container" ${backgroundStyle}>
                        ${mediaContent}
                        <div class="modal-content-overlay">
                            <h2 class="modal-title">${title}</h2>
                            <div class="modal-action-buttons">
                                <a href="${playerUrl}" class="modal-play-btn js-play-trigger">${playIcon} Play</a>
                                <button class="modal-icon-btn add-list-btn ${addedClass}" title="Add to My List" data-id="${itemId}" data-type="${mediaType}" onclick="addToMyList('${itemId}', '${mediaType}', this)">${addListIcon}</button>
                                <button class="modal-icon-btn like-btn ${likedClass}" title="Like" data-id="${itemId}" data-type="${mediaType}" onclick="addToLikedList('${itemId}', '${mediaType}', this)">${likeIcon}</button>
                            </div>
                        </div>
                    </div>
                    <div class="modal-body">
                        <div class="modal-metadata-row">
                            ${releaseYear ? `<span>${releaseYear}</span>` : ''}
                            ${seasons ? `<span>${seasons}</span>` : ''}
                            ${rating}
                            <span class="metadata-badge">HD</span>
                        </div>
                        <div class="modal-main-content-grid">
                            <div class="modal-description"><p>${overview}</p></div>
                            <aside class="modal-meta-data">
                                <p><span class="label">Cast:</span> <span class="value">${cast}</span></p>
                                <p><span class="label">Genres:</span> <span class="value">${genres}</span></p>
                            </aside>
                        </div>
                    </div>
                </div>`;
        }

        function closeInfoModal() {
            document.body.classList.remove('modal-open');
            const infoModal = document.getElementById('info-modal');
            infoModal.classList.remove('active');
            infoModal.innerHTML = '';
        }

        const searchIconTrigger = document.getElementById('search-icon-trigger');
        const headerSearchInput = document.getElementById('header-search-input');
        const closeSearchIcon = document.getElementById('close-search-icon');
        const searchResultsSection = document.getElementById('search-results-section');
        const searchResultsGrid = document.getElementById('search-results');
        const searchFeedback = document.getElementById('search-feedback');
        const heroContainer = document.getElementById('hero-container');
        const mainContent = document.getElementById('main-content');
        let searchTimeout;

        function toggleSearch() {
            if (window.innerWidth <= 480) {
                const mobileSearchPopup = document.getElementById('mobile-search-popup');
                if (mobileSearchPopup) {
                    mobileSearchPopup.classList.add('active');
                    document.body.classList.add('modal-open');
                }
                return;
            }
            document.body.classList.toggle('search-active');
            if (document.body.classList.contains('search-active')) {
                setTimeout(() => headerSearchInput.focus(), 100);
            } else {
                closeSearch();
            }
        }

        const mobileSearchBackBtn = document.getElementById('mobile-search-back-btn');
        if (mobileSearchBackBtn) {
            mobileSearchBackBtn.addEventListener('click', () => {
                const mobileSearchPopup = document.getElementById('mobile-search-popup');
                if (mobileSearchPopup) {
                    mobileSearchPopup.classList.remove('active');
                }
                document.body.classList.remove('modal-open');
                document.body.classList.remove('search-active');
            });
        }

        function closeSearch() {
            document.body.classList.remove('search-active');
            headerSearchInput.value = '';
            searchResultsSection.style.display = 'none';
            searchResultsGrid.innerHTML = '';
            if (searchFeedback) searchFeedback.innerHTML = '';
            heroContainer.style.display = 'flex';
            mainContent.style.display = 'block';
        }

        async function performSearch(query) {
            const url = `https://api.themoviedb.org/3/search/multi?api_key=${apiKey}&query=${encodeURIComponent(query)}`;
            const data = await fetchData(url);
            if (data) displaySearchResults(data.results, query);
        }

        function displaySearchResults(results, query) {
            searchResultsGrid.innerHTML = '';
            searchFeedback.innerHTML = '';
            const validResults = results.filter(item => (item.media_type === 'movie' || item.media_type === 'tv') && item.poster_path);
            if (validResults.length === 0) {
                searchFeedback.textContent = `Your search for "${query}" did not have any matches.`;
                searchResultsSection.style.display = 'block';
                heroContainer.style.display = 'flex';
                mainContent.style.display = 'block';
                return;
            }
            heroContainer.style.display = 'none';
            mainContent.style.display = 'none';
            searchResultsSection.style.display = 'block';
            validResults.forEach(item => {
                const card = createPosterCard(item, item.media_type);
                if (card) searchResultsGrid.appendChild(card);
            });
        }

        document.addEventListener('DOMContentLoaded', initializePage);

        // --- CONTENT FILTERING LOGIC ---
        function filterContent(filter) {
            const allContent = document.querySelectorAll('[data-content-type]');
            allContent.forEach(section => {
                if (filter === 'all' || section.dataset.contentType === filter) {
                    section.style.display = 'block';
                } else {
                    section.style.display = 'none';
                }
            });
        }

        // --- MOBILE FILTERING LOGIC ---
        function setupMobileFiltering() {
            const mobileFilterButtons = document.querySelectorAll('.mobile-filters button');
            mobileFilterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const buttonText = this.textContent.trim();
                    
                    // Remove active class from all buttons
                    mobileFilterButtons.forEach(btn => btn.classList.remove('active'));
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    if (buttonText === 'TV Shows') {
                        filterContent('tv');
                        setupHeroSection('tv');
                    } else if (buttonText === 'Movies') {
                        filterContent('movie');
                        setupHeroSection('movie');
                    } else if (buttonText.includes('Categories')) {
                        // Categories functionality will be implemented later
                        // For now, do nothing when clicked
                    }
                });
            });
        }

        // --- DESKTOP NAVIGATION FILTERING ---
        function setupNavFiltering() {
            const navLinks = document.querySelectorAll('.main-nav li[id]');
            navLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();

                    // Close search if it's active
                    if (document.body.classList.contains('search-active')) {
                        closeSearch();
                    }

                    navLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');

                    const filter = this.id.replace('nav-', '');
                    if (filter === 'home') {
                        filterContent('all');
                        setupHeroSection('all');
                    } else if (filter === 'shows') {
                        filterContent('tv');
                        setupHeroSection('tv');
                    } else if (filter === 'movies') {
                        filterContent('movie');
                        setupHeroSection('movie');
                    }
                });
            });
        }

        // Initialize filtering
        document.addEventListener('DOMContentLoaded', () => {
            setupMobileFiltering();
            setupNavFiltering();
            setupMobileSearch();
        });

        // --- MOBILE SEARCH FUNCTIONALITY ---
        function setupMobileSearch() {
            const searchIconTrigger = document.getElementById('search-icon-trigger');
            const mobileSearchPopup = document.getElementById('mobile-search-popup');
            const mobileSearchBackBtn = document.getElementById('mobile-search-back-btn');
            const mobileSearchInput = document.getElementById('mobile-search-input');
            const mobileSearchResultsList = document.getElementById('mobile-search-results-list');

            // Show mobile search popup when search icon is clicked on mobile
            searchIconTrigger.addEventListener('click', function() {
                if (window.innerWidth <= 480) {
                    mobileSearchPopup.classList.add('active');
                    document.body.classList.add('modal-open');
                    setTimeout(() => mobileSearchInput.focus(), 100);
                    loadMobileSearchResults();
                }
            });

            // Close mobile search popup
            mobileSearchBackBtn.addEventListener('click', function() {
                mobileSearchPopup.classList.remove('active');
                document.body.classList.remove('modal-open');
                mobileSearchInput.value = '';
                mobileSearchResultsList.innerHTML = '';
            });

            // Handle mobile search input
            let mobileSearchTimeout;
            mobileSearchInput.addEventListener('input', function() {
                clearTimeout(mobileSearchTimeout);
                const query = this.value.trim();
                
                mobileSearchTimeout = setTimeout(() => {
                    if (query) {
                        performMobileSearch(query);
                    } else {
                        loadMobileSearchResults();
                    }
                }, 500);
            });

            // Close popup when clicking outside
            mobileSearchPopup.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                    document.body.classList.remove('modal-open');
                }
            });
        }

        async function loadMobileSearchResults() {
            const mobileSearchResultsList = document.getElementById('mobile-search-results-list');
            mobileSearchResultsList.innerHTML = '<div class="loader"></div>';

            try {
                // Load trending content for recommendations
                const movieUrl = `https://api.themoviedb.org/3/trending/movie/day?api_key=${apiKey}&language=en-US`;
                const tvUrl = `https://api.themoviedb.org/3/trending/tv/day?api_key=${apiKey}&language=en-US`;
                
                const [movieData, tvData] = await Promise.all([
                    fetchData(movieUrl),
                    fetchData(tvUrl)
                ]);

                const allTrending = (movieData?.results || []).concat(tvData?.results || []);
                const recommendations = allTrending.slice(0, 8).filter(item => item.backdrop_path);

                displayMobileSearchResults(recommendations, 'Recommended TV Shows & Movies');
            } catch (error) {
                console.error('Error loading mobile search results:', error);
                mobileSearchResultsList.innerHTML = '<p>Could not load recommendations.</p>';
            }
        }

        async function performMobileSearch(query) {
            const mobileSearchResultsList = document.getElementById('mobile-search-results-list');
            mobileSearchResultsList.innerHTML = '<div class="loader"></div>';

            try {
                const url = `https://api.themoviedb.org/3/search/multi?api_key=${apiKey}&query=${encodeURIComponent(query)}`;
                const data = await fetchData(url);
                
                if (data?.results) {
                    const validResults = data.results.filter(item => 
                        (item.media_type === 'movie' || item.media_type === 'tv') && item.backdrop_path
                    );
                    displayMobileSearchResults(validResults, `Search results for "${query}"`);
                } else {
                    mobileSearchResultsList.innerHTML = '<p>No results found.</p>';
                }
            } catch (error) {
                console.error('Error performing mobile search:', error);
                mobileSearchResultsList.innerHTML = '<p>Search failed.</p>';
            }
        }

        function displayMobileSearchResults(results, title) {
            const mobileSearchResultsList = document.getElementById('mobile-search-results-list');
            const mobileSearchTitle = document.querySelector('.mobile-search-title');
            
            mobileSearchTitle.textContent = title;
            
            if (results.length === 0) {
                mobileSearchResultsList.innerHTML = '<p>No results found.</p>';
                return;
            }

            mobileSearchResultsList.innerHTML = results.map(item => {
                const title = item.title || item.name;
                const mediaType = item.media_type || (item.title ? 'movie' : 'tv');
                const playerUrl = `${playerBaseUrl}/${mediaType}/${item.id}`;
                
                return `
                    <div class="mobile-result-item">
                        <img src="${backdropBaseUrl}${item.backdrop_path}" alt="${title}" class="mobile-result-thumbnail">
                        <div class="mobile-result-info">
                            <div class="mobile-result-title">${title}</div>
                            <div class="mobile-result-meta">${mediaType === 'movie' ? 'Movie' : 'TV Show'}</div>
                        </div>
                        <button class="mobile-play-btn js-play-trigger" data-url="${playerUrl}" title="Play">
                            <svg viewBox="0 0 24 24">
                                <path d="M6 4l15 8-15 8z"></path>
                            </svg>
                        </button>
                    </div>
                `;
            }).join('');

            // Add click handlers for play buttons
            mobileSearchResultsList.querySelectorAll('.js-play-trigger').forEach(btn => {
                btn.addEventListener('click', function() {
                    const playerUrl = this.dataset.url;
                    if (playerUrl) {
                        closeInfoModal();
                        openPlayerModal(playerUrl);
                        // Close mobile search popup
                        document.getElementById('mobile-search-popup').classList.remove('active');
                        document.body.classList.remove('modal-open');
                    }
                });
            });
        }

        document.addEventListener('mouseenter', (event) => {
            const card = event.target.closest('.poster-card');
            if (card && window.innerWidth > 480) fetchAndPopulateHoverCard(card);
        }, true);

        document.addEventListener('click', function (event) {
            const moreInfoButton = event.target.closest('.more-info-btn, .btn-more-info, .hero-frame-mobile');
            const playButton = event.target.closest('.js-play-trigger');
            const posterCard = event.target.closest('.poster-card');

            if (event.target.closest('.btn-mylist-mobile')) {
                return;
            }
            if (playButton) {
                event.preventDefault();
                const playerUrl = playButton.getAttribute('href');
                if (playerUrl) {
                    closeInfoModal();
                    openPlayerModal(playerUrl);
                }
            }
            if (moreInfoButton) {
                event.preventDefault();
                const { id, type } = moreInfoButton.dataset;
                if (id && type) openInfoModal(type, id);
            }
            if (posterCard && window.innerWidth <= 480) {
                event.preventDefault();
                const { id, type } = posterCard.dataset;
                if (id && type) openInfoModal(type, id);
            }
            if (event.target.closest('.modal-close-btn') || event.target.matches('.modal-backdrop')) {
                closeInfoModal();
            }
            if (event.target.closest('#close-player-btn')) {
                closePlayerModal();
            }
        });

        searchIconTrigger.addEventListener('click', toggleSearch);
        closeSearchIcon.addEventListener('click', toggleSearch);

        headerSearchInput.addEventListener('input', () => {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                const query = headerSearchInput.value.trim();
                if (query) {
                    searchResultsSection.style.display = 'block';
                    searchResultsGrid.innerHTML = '<div class="loader"></div>';
                    performSearch(query);
                } else {
                    searchResultsGrid.innerHTML = '';
                    searchFeedback.innerHTML = '';
                    searchResultsSection.style.display = 'none';
                    heroContainer.style.display = 'flex';
                    mainContent.style.display = 'block';
                }
            }, 500);
        });

        window.addEventListener('scroll', () => {
            const header = document.querySelector('header');
            if (window.scrollY > 10) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });

        const STORAGE_KEYS = {
            MY_LIST: 'netflix_my_list',
            LIKED_LIST: 'netflix_liked_list'
        };

        function getStorageData(key) {
            try {
                const data = localStorage.getItem(key);
                return data ? JSON.parse(data) : [];
            } catch (e) { return []; }
        }

        function setStorageData(key, data) {
            try {
                localStorage.setItem(key, JSON.stringify(data));
            } catch (e) { console.error('Error writing to localStorage:', e); }
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        function updateAllButtons(itemId, mediaType) {
            const likedList = getStorageData(STORAGE_KEYS.LIKED_LIST);
            const isLiked = likedList.some(item => item.id == itemId && (item.media_type || (item.title ? 'movie' : 'tv')) === mediaType);

            const myList = getStorageData(STORAGE_KEYS.MY_LIST);
            const isInMyList = myList.some(item => item.id == itemId && (item.media_type || (item.title ? 'movie' : 'tv')) === mediaType);

            const addListIcon = isInMyList ? '<svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></svg>' : '<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>';
            const likeIcon = '<svg viewBox="0 0 24 24"><path d="M23,10C23,8.89,22.1,8,21,8H14.68L15.64,3.43C15.66,3.33,15.67,3.22,15.67,3.11C15.67,2.7,15.5,2.32,15.23,2.05L14.17,1L7.59,7.59C7.22,7.95,7,8.45,7,9V19A2,2 0 0,0 9,21H18C18.83,21,19.54,20.5,19.84,19.78L22.86,12.73C22.95,12.5,23,12.26,23,12V10M1,21H5V9H1V21Z"></path></svg>';

            const likeButtons = document.querySelectorAll(`.like-btn[data-id="${itemId}"][data-type="${mediaType}"]`);
            likeButtons.forEach(button => {
                if (isLiked) {
                    button.classList.add('liked');
                } else {
                    button.classList.remove('liked');
                }
            });

            const addListButtons = document.querySelectorAll(`.add-list-btn[data-id="${itemId}"][data-type="${mediaType}"]`);
            addListButtons.forEach(button => {
                if (isInMyList) {
                    button.classList.add('added');
                    button.innerHTML = addListIcon;
                } else {
                    button.classList.remove('added');
                    button.innerHTML = addListIcon;
                }
            });
        }

        async function addToMyList(itemId, mediaType) {
            const url = `https://api.themoviedb.org/3/${mediaType}/${itemId}?api_key=${apiKey}`;
            const data = await fetchData(url);
            if (!data) {
                showToast('Error updating My List');
                return;
            }
            let myList = getStorageData(STORAGE_KEYS.MY_LIST);
            const existsIndex = myList.findIndex(item => item.id == itemId && (item.media_type || (item.title ? 'movie' : 'tv')) === mediaType);

            if (existsIndex > -1) {
                myList.splice(existsIndex, 1);
                showToast(`Removed "${data.title || data.name}" from My List`);
            } else {
                data.media_type = mediaType;
                myList.unshift(data);
                showToast(`Added "${data.title || data.name}" to My List`);
            }
            setStorageData(STORAGE_KEYS.MY_LIST, myList);
            updateAllButtons(itemId, mediaType);
        }

        async function addToLikedList(itemId, mediaType) {
             const url = `https://api.themoviedb.org/3/${mediaType}/${itemId}?api_key=${apiKey}`;
             const data = await fetchData(url);
             if (!data) {
                 showToast('Error updating Liked List');
                 return;
             }
             let likedList = getStorageData(STORAGE_KEYS.LIKED_LIST);
             const existsIndex = likedList.findIndex(item => item.id == itemId && (item.media_type || (item.title ? 'movie' : 'tv')) === mediaType);
             if (existsIndex > -1) {
                 likedList.splice(existsIndex, 1);
                 showToast(`Removed "${data.title || data.name}" from Liked List`);
             } else {
                 data.media_type = mediaType;
                 likedList.unshift(data);
                 showToast(`Added "${data.title || data.name}" to Liked List`);
             }
             setStorageData(STORAGE_KEYS.LIKED_LIST, likedList);
             updateAllButtons(itemId, mediaType);
        }
    </script>
</body>

</html>